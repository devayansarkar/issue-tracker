(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-02951ef8"],{"1b10":function(e,t,i){"use strict";i.r(t);i("a4d3"),i("e01a"),i("fb6a");var n=i("7a23"),a={class:"page-container"},s={key:0,class:"add-issue"},o={class:"page-type"},c={class:"issue"},d={class:"input-container"},r=Object(n["i"])("label",{for:"title",class:"form-field-label"},"Title",-1),l={class:"input-container"},u=Object(n["i"])("label",{for:"description",class:"form-field-label"},"Description",-1),m={class:"issue-info"},p={class:"input-container"},b=Object(n["i"])("label",{for:"date",class:"form-field-label"},"End date",-1),y={class:"input-container"},f=Object(n["i"])("label",{for:"lane",class:"form-field-label"},"Add to lane",-1),O=Object(n["i"])("option",{value:"TODO"},"Todo",-1),j=Object(n["i"])("option",{value:"INPROGRESS"},"Doing",-1),g=Object(n["i"])("option",{value:"DONE"},"Done",-1),h={class:"input-container"},v=Object(n["i"])("label",{for:"category",class:"form-field-label"},"Category",-1),C={class:"issue-cta"},k={key:1,class:"comments-section","data-cy":"comment-section"},A={key:1,class:"input-container add-comment"},D={key:2,class:"comments-button-section"},I={class:"all-comments-section"},w={class:"comments","data-cy":"comment-container"},$={class:"comment-info"},E={class:"comment"},T={key:1,class:"loading-container"};function S(e,t,i,S,Y,R){var V=Object(n["y"])("Navbar"),N=Object(n["y"])("Topbar"),U=Object(n["y"])("Loading");return Object(n["r"])(),Object(n["e"])("div",null,[Object(n["i"])(V,{page:R.getCurrentPage},null,8,["page"]),Object(n["i"])("div",a,[Object(n["i"])(N),e.$store.state.isLoading?Object(n["f"])("",!0):(Object(n["r"])(),Object(n["e"])("div",s,[e.$store.state.message.text?(Object(n["r"])(),Object(n["e"])("div",{key:0,class:["info-message",e.$store.state.message.type],"data-cy":"issue-info-message"},Object(n["A"])(e.$store.state.message.text),3)):Object(n["f"])("",!0),Object(n["i"])("div",o,Object(n["A"])(R.getPageTitle),1),Object(n["i"])("div",c,[Object(n["i"])("form",{onSubmit:t[11]||(t[11]=Object(n["H"])((function(){return R.saveIssue&&R.saveIssue.apply(R,arguments)}),["prevent"]))},[Object(n["i"])("div",d,[r,Object(n["G"])(Object(n["i"])("input",{onClick:t[1]||(t[1]=function(){return R.makeEditable&&R.makeEditable.apply(R,arguments)}),readonly:Y.isReadonly,id:"title",type:"text","onUpdate:modelValue":t[2]||(t[2]=function(e){return Y.title=e}),class:"form-field",placeholder:"Enter issue title","data-cy":"title-input"},null,8,["readonly"]),[[n["D"],Y.title]])]),Object(n["i"])("div",l,[u,Object(n["G"])(Object(n["i"])("textarea",{readonly:Y.isReadonly,onClick:t[3]||(t[3]=function(){return R.makeEditable&&R.makeEditable.apply(R,arguments)}),id:"description","onUpdate:modelValue":t[4]||(t[4]=function(e){return Y.description=e}),type:"description",placeholder:"Add your description here",cols:"30",rows:"8","data-cy":"description-input"},null,8,["readonly"]),[[n["D"],Y.description]])]),Object(n["i"])("div",m,[Object(n["i"])("div",p,[b,Object(n["G"])(Object(n["i"])("input",{min:R.getCurrentDate,readonly:Y.isReadonly,onClick:t[5]||(t[5]=function(){return R.makeEditable&&R.makeEditable.apply(R,arguments)}),id:"date",type:"date","onUpdate:modelValue":t[6]||(t[6]=function(e){return Y.endDate=e}),class:"form-field",placeholder:"Enter issue date","data-cy":"date-input"},null,8,["min","readonly"]),[[n["D"],Y.endDate]])]),Object(n["i"])("div",y,[f,Object(n["G"])(Object(n["i"])("select",{readonly:Y.isReadonly,onClick:t[7]||(t[7]=function(){return R.makeEditable&&R.makeEditable.apply(R,arguments)}),id:"lane","onUpdate:modelValue":t[8]||(t[8]=function(e){return Y.lane=e}),placeholder:"Add your lane",name:"lane",class:Y.isReadonly?"read-only-select":"","data-cy":"lane-input"},[O,j,g],10,["readonly"]),[[n["C"],Y.lane]])]),Object(n["i"])("div",h,[v,Object(n["G"])(Object(n["i"])("input",{readonly:Y.isReadonly,onClick:t[9]||(t[9]=function(){return R.makeEditable&&R.makeEditable.apply(R,arguments)}),id:"category",type:"text","onUpdate:modelValue":t[10]||(t[10]=function(e){return Y.category=e}),class:"form-field",placeholder:"Enter issue category","data-cy":"category-input"},null,8,["readonly"]),[[n["D"],Y.category]])])]),Object(n["i"])("div",C,[Y.isReadonly?Object(n["f"])("",!0):(Object(n["r"])(),Object(n["e"])("button",{key:0,disabled:R.isFormIncomplete,class:"btn btn-primary","data-cy":"add-issue-button"},Object(n["A"])(R.getButtonName),9,["disabled"]))])],32)]),Y.isReadonly?(Object(n["r"])(),Object(n["e"])("div",k,[Y.isAddCommentVisible?Object(n["f"])("",!0):(Object(n["r"])(),Object(n["e"])("div",{key:0,class:"add-comment-button",onClick:t[12]||(t[12]=function(){return R.toggleAddCommentSection&&R.toggleAddCommentSection.apply(R,arguments)}),"data-cy":"view-add-comment-input"}," + Add new comment ")),Y.isAddCommentVisible?(Object(n["r"])(),Object(n["e"])("div",A,[Object(n["G"])(Object(n["i"])("textarea",{id:"comment","onUpdate:modelValue":t[13]||(t[13]=function(e){return Y.comment=e}),type:"comment",placeholder:"Add your comment here",cols:"30",rows:"5","data-cy":"comment-input"},null,512),[[n["D"],Y.comment]])])):Object(n["f"])("",!0),Y.isAddCommentVisible?(Object(n["r"])(),Object(n["e"])("div",D,[Object(n["i"])("button",{class:"btn-danger",onClick:t[14]||(t[14]=function(){return R.toggleAddCommentSection&&R.toggleAddCommentSection.apply(R,arguments)}),"data-cy":"comment-close"}," Close "),Object(n["i"])("button",{class:"btn-primary",onClick:t[15]||(t[15]=function(){return R.addNewComment&&R.addNewComment.apply(R,arguments)}),disabled:R.isCommentNotAdded,"data-cy":"comment-save"}," Save ",8,["disabled"])])):Object(n["f"])("",!0),Object(n["i"])("div",I,[(Object(n["r"])(!0),Object(n["e"])(n["a"],null,Object(n["x"])(Y.comments.slice().reverse(),(function(e){return Object(n["r"])(),Object(n["e"])("div",{key:e.id},[Object(n["i"])("div",w,[Object(n["i"])("div",$,[Object(n["h"])(Object(n["A"])(R.parsedDate(e.created_at))+" ",1),Object(n["i"])("div",{class:"comment-cta",onClick:function(t){return R.deleteComment(e.comment_number)},"data-cy":"comment-delete"}," ‚ùå ",8,["onClick"])]),Object(n["i"])("div",E,Object(n["A"])(e.description),1)])])})),128))])])):Object(n["f"])("",!0)])),e.$store.state.isLoading?(Object(n["r"])(),Object(n["e"])("div",T,[Object(n["i"])(U)])):Object(n["f"])("",!0)])])}i("b0c0"),i("d3b7"),i("25f0");var Y=i("d178"),R=i("ddc0"),V=i("3a5e"),N=i("c1df"),U=i.n(N),_={name:"AddNewIssue",components:{Navbar:Y["a"],Topbar:R["a"],Loading:V["a"]},data:function(){return{id:0,title:"",description:"",endDate:"",lane:"TODO",category:"",comments:[],pageType:this.$route.name,isReadonly:"ViewIssue"===this.$route.name,isAddCommentVisible:!1,comment:""}},computed:{isFormIncomplete:function(){return""===this.title||""===this.description},isCommentNotAdded:function(){return""===this.comment},getButtonName:function(){return"AddIssue"===this.pageType?"Save":"Update"},getPageTitle:function(){if("AddIssue"===this.pageType)return"Add issue";if("ViewIssue"===this.pageType){var e=this.$route.params&&this.$route.params.issue_id;return"Viewing issue : ".concat(e)}if("UpdateIssue"===this.pageType){var t=this.$route.params&&this.$route.params.issue_id;return"Updating issue : ".concat(t)}return"Update issue"},getCurrentDate:function(){return U()().format("YYYY-MM-DD").toString()},getCurrentPage:function(){return"AddIssue"===this.pageType||"UpdateIssue"===this.pageType?"addIssue":"viewIssue"}},methods:{cleanState:function(){this.title="",this.description="",this.endDate="",this.lane="TODO",this.category="",this.id=""},saveIssue:function(){var e=U()(this.endDate,"YYYY-MM-DD").format("DD/MM/YYYY");"UpdateIssue"===this.pageType?this.$store.dispatch("updateIssue",{id:this.id,payload:{title:this.title,description:this.description,category:this.category,end_date:e,status:this.lane}}):this.$store.dispatch("addNewIssue",{title:this.title,description:this.description,category:this.category,end_date:e,status:this.lane})},toggleAddCommentSection:function(){this.isAddCommentVisible=!this.isAddCommentVisible,this.comment=""},makeEditable:function(){this.isReadonly=!1,"AddIssue"!==this.pageType&&(this.pageType="UpdateIssue")},parsedDate:function(e){var t=e,i=U()(t,"YYYY-MM-DD");return i.toLocaleString().substring(0,16)},addNewComment:function(){this.$store.dispatch("addComment",{description:this.comment,issueId:this.$route.params.issue_id})},deleteComment:function(e){window.confirm("Are you sure you want to delete the comment ?")?this.$store.dispatch("deleteComment",{commentId:e,issueId:this.$route.params.issue_id}):console.log("Comment is not deleted.")}},created:function(){var e=this;if(this.$route.params&&this.$route.params.issue_id){var t=this.$route.params;this.$store.dispatch("getIssue",{id:t.issue_id})}this.$store.watch((function(e){return e.issue}),(function(t){""!==t.title&&(e.title=t.title,e.description=t.description,e.endDate=t.end_date,e.lane=t.status,e.category=t.category,e.id=t.id,e.comments=t.comments||[])})),this.$store.watch((function(e){return e.message}),(function(t){"success"===t.type&&"AddIssue"===e.pageType&&e.cleanState()}))}};i("7427");_.render=S;t["default"]=_},"25f0":function(e,t,i){"use strict";var n=i("6eeb"),a=i("825a"),s=i("d039"),o=i("ad6d"),c="toString",d=RegExp.prototype,r=d[c],l=s((function(){return"/a/b"!=r.call({source:"a",flags:"b"})})),u=r.name!=c;(l||u)&&n(RegExp.prototype,c,(function(){var e=a(this),t=String(e.source),i=e.flags,n=String(void 0===i&&e instanceof RegExp&&!("flags"in d)?o.call(e):i);return"/"+t+"/"+n}),{unsafe:!0})},"41b6":function(e,t,i){},7427:function(e,t,i){"use strict";i("41b6")}}]);
//# sourceMappingURL=chunk-02951ef8.f76d9011.js.map